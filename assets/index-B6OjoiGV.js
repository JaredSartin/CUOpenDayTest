(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();const at=Symbol("routerLinksData"),ct=new Set;let K;const lt=n=>{if(n.indexOf("-")===-1)return n;const t=n.split("-");let e="";for(let s=0;s<t.length;s++){const o=t[s];e+=s?o.charAt(0).toUpperCase()+o.slice(1):o}return e};function N(n,t,e){const s=n.attributes;for(let o=0;o<s.length;o++){const i=s[o];if(i.name.indexOf(t)===0){const r=lt(i.name.slice(t.length));e[r]=i.value}}return e}function ut(n,t,e,s,o){let i=o[e];return typeof i=="function"&&(i=i.call(n,t,s)),i||{}}function q(n,t,e,s,o){const i=n[at].options,r=ut(n,t,s,e,i);return N(n,o,r),N(e,o,r)}function ht(n,t,e,s){const o=n.hasAttribute("active-class")?n.getAttribute("active-class"):"active";if(o){const i=K.isActive(t,e,s,n.hasAttribute("exact"));n.classList.toggle(o,i)}}function dt(n){K=n}function mt(){ct.forEach(n=>{n.querySelectorAll("[route]").forEach(t=>{const e=t.getAttribute("route");if(!e)return;const s=q(n,e,t,"params","param-"),o=q(n,e,t,"query","query-");ht(t,e,s,o)})})}const pt={create:dt,done:mt},X="/CUOpenDayTest/cu-logo.svg";class ft extends HTMLElement{connectedCallback(){const t=(e,s)=>`
    <nav-item class="cursor-pointer border-transparent [&.active]:border-cardiff-dark border-0 border-b-4 h-16 flex items-center" route="${e}">
      <span class="text-cardiff-dark font-semibold">${s}</span>
    </nav-item>`;this.innerHTML=`
    <nav>
      <div class="w-full flex coll sm:flex-row items-center gap-4 p-4 h-18">
        <a href="https://www.cardiff.ac.uk/" target="_blank" rel="noopener noreferrer">
          <img src="${X}" alt="Cardiff University Logo" class="h-16 w-auto" />
        </a>
        <router-links id="top-nav" class="nav-spacer h-18 flex gap-6 items-center">
          ${t("home","Event Home")}
          ${t("location-hub","Getting Around")}
        </router-links>
      </div>
    </nav>
    `}}customElements.define("c-header",ft);class gt extends HTMLElement{connectedCallback(){const{titletext:t,secondarytext:e,background:s}=Object.fromEntries([...this.attributes].map(o=>[o.name,o.value]));this.innerHTML=`
      <section class="cu-head w-full md:h-64 h-48 text-white bg-cover bg-center bg-black/40 bg-blend-multiply px-4">
        <div class="max-w-4xl mx-auto flex flex-col justify-center h-full py-8">
          <h1 class="text-2xl md:text-5xl font-bold mb-4 font-serif w-full">${t}</h1>
          ${e!=="undefined"?`<h3 class="text-xl md:text-2xl mb-2 w-full">${e}</h3>`:""}
        </div>
      </section>
    `,this.querySelector("section.cu-head").style.backgroundImage=`url('${s||""}')`}}customElements.define("c-page-header",gt);class bt extends HTMLElement{connectedCallback(){this.innerHTML=`
      Error: The page you are looking for does not exist.
    `}}customElements.define("s-error",bt);class yt extends HTMLElement{model;unbindLinks;beforeRouteEnter(){this.model=window.CUEvents.OpenDay}connectedCallback(){this.innerHTML=`
      <c-page-header titletext="${this.model.description}" secondarytext="${this.openDates()}" background="${this.model.cover_image}"></c-page-header>
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h2 class="text-2xl font-semibold mb-4">Topics</h2>
        <router-links id="topics-list">${this.renderTopics(this.model.topics)}</div>
      </section>
    `}renderTopics(t){return t.map(e=>e&&e.name?`
    <div route="topic" param-topic-id="${e.id}" class="bg-cardiff-light flex flex-row items-center justify-items-center rounded-lg shadow p-1 mb-4 min-h-32 cursor-pointer hover:bg-cardiff-grey transition">
      <img src="${e.cover_image||X}" alt="${e.name}" class="h-48 w-32 object-cover rounded" />
      <div class="ml-4 flex flex-col">
        <h2 class="text-xl font-bold text-cardiff-red mb-2">${e.name}</h2>
        <p class="text-cardiff-dark mb-2">${e.description||""}</p>
      </div>
    </div>
    `:"").join("")}openDates(){const t=new Date(this.model.start_time),e=new Date(this.model.end_time);return t.toDateString()===e.toDateString()?`${t.toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})}, from ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} to ${e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:`${t.toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})} to ${e.toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})}`}}customElements.define("s-landing",yt);class vt extends HTMLElement{model;$router;beforeRouteEnter(){this.model=window.CUEvents.Locations}connectedCallback(){this.innerHTML=`
      <c-page-header titletext="Locations" secondarytext="Notable locations on event day" background=""></c-page-header>
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h2 class="text-2xl font-semibold mb-4">University Locations</h2>
        <ul class="list-disc list-inside text-sm mb-8">
          ${this.model.university.map(t=>`
            <li><a href="${this.$router.generate("location",{locationId:t.id})}" class="text-blue-600 visited:text-purple-600">${t.title}</a></li>
          `).join("")}
        </ul>
        <h2 class="text-2xl font-semibold mb-4">Refreshment Locations</h2>
        <ul class="list-disc list-inside text-sm mb-8">
          ${this.model.refreshments.map(t=>`
            <li><a href="${this.$router.generate("location",{locationId:t.id})}" class="text-blue-600 visited:text-purple-600">${t.building_name}</a></li>
          `).join("")}
        </ul>
        <h2 class="text-2xl font-semibold mb-4">Accommodation Locations</h2>
        <ul class="list-disc list-inside text-sm mb-8">
          ${this.model.accommodation.map(t=>`
            <li><a href="${this.$router.generate("location",{locationId:t.id})}" class="text-blue-600 visited:text-purple-600">${t.building_name}</a></li>
          `).join("")}
        </ul>
        <h2 class="text-2xl font-semibold mb-4">Transportation Locations</h2>
        <ul class="list-disc list-inside text-sm mb-8">
          ${this.model.transportation.map(t=>`
            <li><a href="${this.$router.generate("location",{locationId:t.id})}" class="text-blue-600 visited:text-purple-600">${t.building_name}</a></li>
          `).join("")}
        </ul>
      </section>
    `}}customElements.define("s-location-list",vt);class xt extends HTMLElement{universityModel;refreshmentsModel;accomodationModel;transportationModel;beforeRouteEnter(t){this.universityModel=window.CUEvents.Locations.university.find(e=>e.id==t.params.locationId),this.refreshmentsModel=window.CUEvents.Locations.refreshments.find(e=>e.id==t.params.locationId),this.accomodationModel=window.CUEvents.Locations.accommodation.find(e=>e.id==t.params.locationId),this.transportationModel=window.CUEvents.Locations.transportation.find(e=>e.id==t.params.locationId)}connectedCallback(){const t=this.universityModel||this.refreshmentsModel||this.accomodationModel||this.transportationModel;if(!t){this.innerHTML=`
        <c-page-header titletext="Location Not Found" secondarytext="" background=""></c-page-header>
        <section class="cu-content max-w-3xl mx-auto my-8">
          <p>We currently do not have information about this location. Please check back later or contact support for assistance.</p>
        </section>
      `;return}const e=s=>s?s.replace(/\r\n/g,"<br>").trim():"";this.innerHTML=`
      <c-page-header titletext="${t.title}" secondarytext="${t.campus.title}" background="${t.cover_image}"></c-page-header>
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h2 class="text-2xl font-semibold mb-4">Details</h2>
        <p class="mb-4">${this.mapLink(t.address,t.postcode)}</p>
        <ul class="list-disc list-inside text-sm">
          <li><span class="font-semibold">Accessible:</span> ${t.accessible==1?"Yes":"No"}</li>
          <li><span class="font-semibold">Bike Parking:</span> ${t.bike_parking==1?"Yes":"No"}</li>
          <li><span class="font-semibold">Parking:</span> ${t.parking==1?"Yes":"No"}</li>
          ${t.website?`<li><a href="${t.website}" class="text-blue-600 visited:text-purple-600" target="_blank" rel="noopener noreferrer">Official Website</a></li>`:""}
        </ul>
      </section>
      ${this.universityModel&&this.universityModel.description?`
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h3 class="text-xl font-semibold mb-4">Location Information</h3>
        <p class="mb-4">${e(this.universityModel.description)}</p>
      </section>`:""}
      ${this.refreshmentsModel&&this.refreshmentsModel.title?`
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h3 class="text-xl font-semibold mb-4">Refreshments Available</h3>
        <p class="mb-4">${e(this.refreshmentsModel.title)}</p>
      </section>`:""}
      ${this.accomodationModel&&this.accomodationModel.title?`
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h3 class="text-xl font-semibold mb-4">Accommodation Information</h3>
        <p class="mb-4">${e(this.accomodationModel.title)}</p>
      </section>`:""}
      ${this.transportationModel&&this.transportationModel.title?`
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h3 class="text-xl font-semibold mb-4">Transportation Information</h3>
        <p class="mb-4">${e(this.transportationModel.title)}</p>
      </section>`:""}
    `}mapLink(t,e){const s=e?e.trim():"",o=t?t.trim():"",i=o?o+", "+s:s,r=encodeURIComponent(i),c=navigator.userAgent;let a;return/iPhone|iPad|iPod/.test(c)?a=`http://maps.apple.com/?q=${r}`:/Android/.test(c)?a=`geo:0,0?q=${r}`:a=`https://www.google.com/maps/search/?api=1&query=${r}`,`${i} (<a href="${a}" class="text-blue-600 visited:text-purple-600" target="_blank" rel="noopener noreferrer">View on map</a>)`}}customElements.define("s-location",xt);class wt extends HTMLElement{model;eventModel;$router;beforeRouteEnter(t){this.eventModel=window.CUEvents.OpenDay,this.model=window.CUEvents.OpenDay.topics.find(e=>e.id==t.params.topicId),this.model||t.redirectTo("error")}connectedCallback(){this.innerHTML=`
      <c-page-header titletext="${this.model.name}" secondarytext="${this.eventModel.description}" background="${this.model.cover_image}"></c-page-header>
      <section class="cu-content max-w-3xl mx-auto my-8">
        ${this.model.description?`<p class="mb-4">${this.model.description}</p>`:""}
      </section>
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h2 class="text-2xl font-semibold mb-4">Programs</h2>
        <ul class="list-disc list-inside text-sm">
          ${this.model.programs.map(t=>t&&t.title?`
            <details class="group border p-4 rounded-lg mb-4 hover:bg-cardiff-light transition">
              <summary class="cursor-pointer flex flex-col">
                ${t.programType.type?`<p class="italic">${t.programType.type}</p>`:""}
                <h4 class="text-lg">${t.title}</h4>
                ${t.start_time?`<p><span class="font-semibold">Time:</span> ${this.parseTime(t.start_time)}${t.end_time?" - "+this.parseTime(t.end_time,!1):""}</p>`:""}
              </summary>

              <div class="mt-3 opacity-0 group-open:opacity-100 transition-all duration-300">
                <hr/>
                ${t.school?`<p class="italic mt-2 mb-2">${t.school.name}</p>`:""}
                ${t.description?`<p class="mt-2 mb-2">${t.description}</p>`:""}
                <p><span class="font-semibold">Building:</span> ${t.location.title} (<a href="${this.$router.generate("location",{locationId:t.location.id})}" class="text-blue-600 visited:text-purple-600">Location details</a>)</p>
                ${t.floor?`<p><span class="font-semibold">Floor:</span> ${t.floor}</p>`:""}
                ${t.room?`<p><span class="font-semibold">Room:</span> ${t.room}</p>`:""}
              </div>
            </details>
          `:"").join("")}
        </ul>
      </section>
    `}parseTime(t,e=!0){const s=new Date(t);return e?s.toLocaleString(void 0,{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}customElements.define("s-topic",wt);const $t=(n,t,e)=>(n[t]=e,n),Lt=Array.isArray,U=Object.keys,x=n=>n&&(Lt(n)?n.slice(0):w({},n)),j=(n,t)=>t.reduce((e,s)=>n[s]===void 0?e:$t(e,s,n[s]),{}),F=(n,t)=>{const e=U(n);return e.length===U(t).length&&e.every(s=>t[s]===n[s])},w=Object.assign;function O(n,t,...e){if(!n){let s=0;throw new Error("Invariant Violation: "+t.replace(/%s/g,()=>e[s++]))}}function Et(n){let t=[];const e={},s={};n(function(a,l,u){let d;if(O(!s[a],'Route names must be unique, but route "%s" is declared multiple times',a),s[a]=!0,arguments.length===1&&(l={}),arguments.length===2&&typeof l=="function"&&(u=l,l={}),typeof l.path!="string"){const m=a.split(".");l.path=m[m.length-1]}u&&(t=t.concat(a),u(),d=o(),t.splice(-1)),i({name:a,path:l.path,routes:d||[],options:l})});function o(){return e[r()]||[]}function i(c){const a=r();e[a]=e[a]||[],e[a].push(c)}function r(){return t.join(".")}return o()}function tt(n){const t=[];return n.forEach(({name:e,children:s,...o})=>{if(typeof o.path!="string"){const i=e.split(".");o.path=i[i.length-1]}t.push({name:e,path:o.path,options:o,routes:s?tt(s):[]})}),t}const Tt=/:([a-zA-Z_$][a-zA-Z0-9_$?]*[?+*]?)/g,Ct=/[+*?]$/g,et=/\?(.+)/,_={};function nt(n,t){return n in _||(_[n]=t(n)),_[n]}function kt(n,t){return nt(n,t).paramNames}function Mt(n,t,e){const s=nt(n,e),o=s.matcher,i=s.paramNames,r=t.match(o);if(!r)return null;const c={};return i.forEach(function(a,l){c[a]=r[l+1]&&decodeURIComponent(r[l+1])}),c}function Rt(n,t){return t=t||{},n.replace(Tt,function(e,s){const o=s.replace(Ct,""),i=s.slice(-1);if(i==="?"||i==="*"){if(t[o]==null)return""}else O(t[o]!=null,"Missing '%s' parameter for path '%s'",o,n);let r=encodeURIComponent(t[o]);return(i==="*"||i==="+")&&(r=r.replace("%2F","/")),r})}function Ut(n,t){const e=t.match(et);return e&&n.parse(e[1])}function St(n,t,e){const s=n.stringify(e,{indices:!1});return s?st(t)+"?"+s:t}function st(n){return n.replace(et,"")}function Pt(n,t,e){return n.addEventListener(t,e),e}function Ot(n,t,e){return n.removeEventListener(t,e),e}class _t{constructor(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),this.location=window.location,this.history=window.history}atRoot(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root}getHash(){const t=this.location.href.match(/#(.*)$/);return t?t[1]:""}getFragment(t,e){if(t==null)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);const s=this.root.replace(Dt,"");t.indexOf(s)||(t=t.slice(s.length))}else t=this.getHash();return t.replace(B,"")}start(t={}){this.started=!0,this.options=w({root:"/"},t),this.location=this.options.location||this.location,this.history=this.options.history||this.history,this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=this._wantsPushState;const e=this.getFragment();this.root=`/${this.root}/`.replace(It,"/"),Pt(window,this._hasPushState?"popstate":"hashchange",this.checkUrl),this.fragment=e;const s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(`${this.root}#${this.fragment}`),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(B,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()}stop(){Ot(window,this._hasPushState?"popstate":"hashchange",this.checkUrl),this.started=!1}route(t,e){this.handlers.unshift({route:t,callback:e})}checkUrl(){if(this.getFragment()===this.fragment)return!1;this.loadUrl()}loadUrl(t){return t=this.fragment=this.getFragment(t),this.handlers.some(e=>{if(e.route.test(t))return e.callback(t),!0})}update(t,e){if(!this.started)return!1;(!e||e===!0)&&(e={trigger:!!e});let s=this.root+(t=this.getFragment(t||""));if(t=t.replace(At,""),this.fragment!==t){if(this.fragment=t,t===""&&s!=="/"&&(s=s.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,s);else if(this._wantsHashChange)this._updateHash(this.location,t,e.replace);else return this.location.assign(s);if(e.trigger)return this.loadUrl(t)}}_updateHash(t,e,s){if(s){const o=t.href.replace(/(javascript:|#).*$/,"");t.replace(`${o}#${e}`)}else t.hash=`#${e}`}onChange(t){this.route(/^(.*?)$/,t)}hasPushState(){if(!this.started)throw new Error("only available after LocationBar.start()");return this._hasPushState}}const B=/^[#\/]|\s+$/g,It=/^\/+|\/+$/g,Dt=/\/$/,At=/#.*$/;class Ht{constructor(t={}){this.path=t.path||"",this.options=w({pushState:!1,root:"/"},t),this.locationBar=new _t,this.locationBar.onChange(e=>{this.handleURL(`/${e||""}`)}),this.locationBar.start(t)}getURL(){return this.path}setURL(t,e={}){this.path!==t&&(this.path=t,this.locationBar.update(t,w({trigger:!0},e)))}replaceURL(t,e={}){this.path!==t&&(this.path=t,this.locationBar.update(t,w({trigger:!0,replace:!0},e)))}onChange(t){this.changeCallback=t}formatURL(t){if(this.locationBar.hasPushState()){let e=this.options.root;return t!==""&&(e=e.replace(/\/$/,"")),e+t}else return t[0]==="/"&&(t=t.substr(1)),`#${t}`}removeRoot(t){return this.options.pushState&&this.options.root&&this.options.root!=="/"?t.replace(this.options.root,""):t}destroy(){this.locationBar.stop()}handleURL(t){this.path=t,this.changeCallback&&this.changeCallback(t)}}class Nt{constructor({path:t}){this.path=t||""}getURL(){return this.path}setURL(t,e){this.path!==t&&(this.path=t,this.handleURL(this.getURL(),e))}replaceURL(t,e){this.path!==t&&this.setURL(t,e)}onChange(t){this.changeCallback=t}handleURL(t,e={}){this.path=t,e=w({trigger:!0},e),this.changeCallback&&e.trigger&&this.changeCallback(t)}removeRoot(t){return t}formatURL(t){return t}}const S="TransitionRedirected",T="TransitionCancelled";function V(n,t,e){n.middleware.forEach(s=>{s.error&&s.error(t,e)})}function W(n){n=n||{};const t=n.router,e=t.log,s=t.logError,o=n.path,i=n.match,r=i.routes,c=i.params,a=i.pathname,l=i.query,u=n.id,d=Date.now();e("---"),e("Transition #"+u,"to",o),e("Transition #"+u,"routes:",r.map(h=>h.name)),e("Transition #"+u,"params:",c),e("Transition #"+u,"query:",l);let m,f;const g=new Promise(function(h,y){m=h,f=y});g.then(function(){e("Transition #"+u,"completed in",Date.now()-d+"ms")}).catch(function(h){h.type!==S&&h.type!==T&&(e("Transition #"+u,"FAILED"),s(h))});let A=!1;const p={id:u,prev:{routes:x(t.state.routes)||[],path:t.state.path||"",pathname:t.state.pathname||"",params:x(t.state.params)||{},query:x(t.state.query)||{}},routes:x(r),path:o,pathname:a,params:x(c),query:x(l),redirectTo:function(...h){return t.transitionTo(...h)},retry:function(){return t.transitionTo(o)},cancel:function(h){t.state.activeTransition===p&&(p.isCancelled||(t.state.activeTransition=null,p.isCancelled=!0,A=!0,h||(h=new Error(T),h.type=T),h.type===T&&e("Transition #"+u,"cancelled"),h.type===S&&e("Transition #"+u,"redirected"),t.middleware.forEach(y=>{y.cancel&&y.cancel(p,h)}),f(h)))},followRedirects:function(){return g.catch(function(h){return t.state.activeTransition?t.state.activeTransition.followRedirects():Promise.reject(h)})},then:g.then.bind(g),catch:g.catch.bind(g)};t.middleware.forEach(h=>{h.before&&h.before(p)});function H(h,y){let M,R;if(!A)if(h<t.middleware.length){M=t.middleware[h],R=M.name||"anonymous",e("Transition #"+u,"resolving middleware:",R);let $;try{$=M.resolve?M.resolve(p,y):y,O(p!==$,"Middleware %s returned a transition which resulted in a deadlock",R)}catch(v){return t.state.activeTransition=null,V(t,p,v),f(v)}Promise.resolve($).then(function(v){H(h+1,v)}).catch(function(v){e("Transition #"+u,"resolving middleware:",R,"FAILED"),t.state.activeTransition=null,V(t,p,v),f(v)})}else t.state={activeTransition:null,routes:r,path:o,pathname:a,params:c,query:l},t.middleware.forEach($=>{$.done&&$.done(p)}),m()}return n.noop?m():Promise.resolve().then(()=>H(0)),n.noop&&(p.noop=!0),p}function Q(n,t,e){e!==!0&&(n[t]=typeof e=="function"?e:()=>{})}const qt={parse(n){return n.split("&").reduce((t,e)=>{const s=e.split("=");return t[s[0]]=decodeURIComponent(s[1]),t},{})},stringify(n){return Object.keys(n).reduce((t,e)=>(n[e]!==void 0&&t.push(e+"="+encodeURIComponent(n[e])),t),[]).join("&")}};function jt(n,t){if(n instanceof RegExp)return{keys:!1,pattern:n};var e,s,o,i,r=[],c="",a=n.split("/");for(a[0]||a.shift();o=a.shift();)e=o[0],e==="*"?(r.push(e),c+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):e===":"?(s=o.indexOf("?",1),i=o.indexOf(".",1),r.push(o.substring(1,~s?s:~i?i:o.length)),c+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(c+=(~s?"?":"")+"\\"+o.substring(i))):c+="/"+o;return{keys:r,pattern:new RegExp("^"+c+"/?$","i")}}const z=/:(\w+)\*/;function Ft(n){const t=z.exec(n),e=t?n.replace(z,"*"):n,{pattern:s,keys:o}=jt(e),i=t?o.map(r=>r==="*"?t[1]:r):o;return{matcher:s,paramNames:i}}class Bt{constructor(t={}){this.nextId=1,this.state={},this.middleware=[],this.options=w({location:"browser",logError:!0,qs:qt,patternCompiler:Ft},t),Q(this,"log",this.options.log),Q(this,"logError",this.options.logError),t.routes&&this.map(t.routes)}use(t,e={}){const s=typeof t=="function"?{resolve:t}:t;return typeof e.at=="number"?this.middleware.splice(e.at,0,s):this.middleware.push(s),s.create&&s.create(this),this}map(t){this.routes=Array.isArray(t)?tt(t):Et(t);const e=this.matchers=[],s={},o={};i({routes:this.routes},[],r=>{let c=r.reduce((l,u)=>(u.path[0]==="/"?u.path:`${l}/${u.path}`).replace(/\/$/,""),"");c===""&&(c="/");const a=r[r.length-1];if(a.options.abstract){o[c]=a.name;return}if(a.path===""){let l;e.some(u=>{if(u.path===c)return l=u,!0}),l?l.routes=r:o[c]&&e.push({routes:r,name:o[c],path:c})}if(e.push({routes:r,name:a.name,path:c}),s[c]&&a.path!=="")throw new Error(`Routes ${s[c]} and ${a.name} have the same url path '${c}'`);s[c]=a.name});function i(r,c,a){r.routes.forEach(l=>{a(c.concat(l)),l.routes.length&&i(l,c.concat(l),a)})}return this}listen(t){const e=this.location=this.createLocation(t||"");return e.onChange(s=>{const o=this.state.path;this.dispatch(s).catch(i=>(i&&i.type===T&&this.location.replaceURL(o,{trigger:!1}),i))}),this.dispatch(e.getURL())}transitionTo(t,e,s){return this.state.activeTransition?this.replaceWith(t,e,s):this.doTransition("setURL",t,e,s)}replaceWith(t,e,s){return this.doTransition("replaceURL",t,e,s)}generate(t,e,s){O(this.location,"call .listen() before using .generate()");let o;if(s=s||{},this.matchers.forEach(r=>{r.name===t&&(o=r)}),!o)throw new Error(`No route is named ${t}`);const i=St(this.options.qs,Rt(o.path,e),s);return this.location.formatURL(i)}destroy(){this.location&&this.location.destroy&&this.location.destroy(),this.state.activeTransition&&this.state.activeTransition.cancel(),this.state={},this.middleware.forEach(t=>{t.destroy&&t.destroy(this)})}isActive(t,e,s,o){const i=this.state.routes||[],r=this.state.params,c=this.state.query;let a=i.some(l=>l.name===t)&&(!o||i[i.length-1].name===t);return a=a&&(!e||U(e).every(l=>r[l]===e[l])),a=a&&(!s||U(s).every(l=>c[l]===s[l])),a}doTransition(t,e,s,o){const i=this.location.getURL();let r=e;r[0]!=="/"&&(r=this.generate(e,s,o),r=r.replace(/^#/,"/")),this.options.pushState&&(r=this.location.removeRoot(r));const c=this.dispatch(r);return c.catch(a=>(a&&a.type===T&&this.location.replaceURL(i,{trigger:!1}),a)),this.location[t](r,{trigger:!1}),c}match(t){t=(t||"").replace(/\/$/,"")||"/";let e,s=[];const o=st(t),{qs:i,patternCompiler:r}=this.options;return this.matchers.some(a=>{if(e=Mt(a.path,o,r),e)return s=a.routes,!0}),{routes:s.map(c),params:e||{},pathname:o,query:Ut(i,t)||{}};function c(a){return{name:a.name,path:a.path,params:j(e,kt(a.path,r)),options:x(a.options)}}}dispatch(t){const e=this.match(t),s=e.query,o=e.pathname,i=this.state.activeTransition;if(i&&i.pathname===o&&F(i.query,s))return i;if(i){const c=new Error(S);c.type=S,c.nextPath=t,i.cancel(c)}if(!i&&this.state.pathname===o&&F(this.state.query,s))return W({id:this.nextId++,path:t,match:e,noop:!0,router:this});const r=W({id:this.nextId++,path:t,match:e,router:this});return this.state.activeTransition=r,r}createLocation(t){const e=this.options.location;if(typeof e!="string")return e;if(e==="browser")return new Ht(j(this.options,["pushState","root"]));if(e==="memory")return new Nt({path:t});throw new Error("Location can be `browser`, `memory` or a custom implementation")}log(...t){console.info(...t)}logError(...t){console.error(...t)}}const Vt=Promise.resolve();let b=Object.create(null),I=Object.create(null),k=Object.create(null),D,L,E;function Wt(n){const t=parseFloat(n);return n==t?t:n}function Qt(n,t){let e=n;return e!==void 0&&(t==="number"?e=Wt(n):typeof t=="function"&&(e=t(n))),e}function zt(n){return{init(t){t(n)}}}function Yt(n){D=n,L=n.options.outlet}function Zt(){D=null,b=Object.create(null),I=Object.create(null),k=Object.create(null),E=null}function Gt(n,t){const e=Object.keys(n);return e.length===Object.keys(t).length&&e.every(s=>t[s]===n[s])}function Jt(n){return(n.shadowRoot||n).querySelector(n.constructor.outlet||"router-outlet")}function Kt(){if(E)return E;if(!L)return document.body;if(E=typeof L=="string"?document.querySelector(L):L,!E)throw new Error(`slick-router(wc): Invalid outlet option ${L}`);return E}function Xt(n,t){let e=n.routes[t];for(;e;){if(e.options.component)return b[e.name];e=n.routes[--t]}}function te(n,t){let e,s,o;const i=Math.max(n.length,t.length);for(e=0;e<i&&(s=n[e],o=t[e],!(!(s&&o)||s.name!==o.name||!Gt(s.params,o.params)));e++);return e}function ot(n,t,e){for(let s=0;s<t.length;s++){const{route:o}=t[s],i=k[o.name];for(const{hooks:r,set:c}of Object.values(i))r.forEach(a=>{typeof a[e]=="function"&&a[e](n,c)})}}async function P(n,t,e,s){for(let o=0;o<t.length;o++){let i;const{route:r,el:c}=t[o],a=r.options[`${e}${s}`];if(typeof a=="function"&&(i=await a(n),i===!1&&n.cancel()),n.isCancelled)break;const l=c&&c[`${e}Route${s}`];if(typeof l=="function"&&(i=await l.call(c,n),i===!1&&n.cancel()),n.isCancelled)break}}function ee(n){return n&&n.__esModule?n.default:n}function Y(n){return n&&typeof n=="object"?n:zt(n)}function ne(n){let t=k[n.name];if(!t){t=k[n.name]=Object.create(null);const e=n.options.properties;if(e)for(const[s,o]of Object.entries(e)){const i=Array.isArray(o)?o.map(Y):[Y(o)],r=(c,a)=>{const l=t[s],u=Qt(c,a);if(l.value===u)return;l.value=u;const d=b[n.name];d&&(d[s]=u),i.forEach(m=>{typeof m.update=="function"&&m.update(u,d)})};t[s]={hooks:i,set:r},i.forEach(c=>{typeof c.init=="function"&&c.init(r)})}}}async function se(n){const t=[];for(const e of n){let s=e.options.reuse?b[e.name]:void 0,o=e.options.component;!s&&o&&(typeof o=="function"&&!(o.prototype instanceof HTMLElement)&&(o=I[e.name]||(I[e.name]=ee(await o(e)))),s=typeof o=="string"?document.createElement(o):new o,b[e.name]=s,s.$router=D),ne(e),t.push({el:s,route:e})}return t}function Z(n,t){const e=k[t.name];Object.entries(e).forEach(([s,{value:o}])=>{n[s]=o})}const it=new WeakSet,G=new WeakMap;async function oe(n,t,e){const{path:s,pathname:o,routes:i,params:r,query:c}=n,a={path:s,pathname:o,routes:i,params:r,query:c};for(let l=0;l<e;l++){const u=n.routes[l],d=b[u.name];d&&(d.$route=a,Z(d,u))}for(let l=0;l<t.length;l++){const{el:u,route:d}=t[l];if(u){const m=Xt(n,e+l-1),f=m?Jt(m):Kt();if(f){const g=G.get(f)||f.firstElementChild;g&&(f.removeChild(g),it.add(g)),u.$route=a,Z(u,d),f.appendChild(u),G.set(f,u),await(u.updateComplete||Vt)}}}}function ie(n,t){let e;for(let s=t.length-1;s>=0;s--){const{route:o,el:i}=t[s];n.some(({route:r})=>r.name===o.name)||(i&&(!e&&!it.has(i)&&i.remove(),e=!0),b[o.name]=void 0)}}async function re(n){const t=n.prev.routes,e=te(t,n.routes),s=[];for(let i=t.length-1;i>=e;i--){const r=t[i];s.push({el:b[r.name],route:r})}if(await P(n,s,"before","Leave"),n.isCancelled)return;const o=await se(n.routes.slice(e));await P(n,o,"before","Enter"),!n.isCancelled&&(ot(n,o,"enter"),await oe(n,o,e),ie(o,s),n.activated=o,n.deactivated=s)}function ae(n){ot(n,n.deactivated,"leave"),P(n,n.deactivated,"after","Leave"),P(n,n.activated,"after","Enter")}const ce={create:Yt,destroy:Zt,resolve:re,done:ae};let rt;function C(n,t){window.dispatchEvent(new CustomEvent(`${rt}${n}`,{detail:t}))}const le={create:function(n){rt=n.options.eventPrefix||"router-"},before:function(n){C("before:transition",{transition:n})},done:function(n){C("transition",{transition:n})},cancel:function(n,t){t.type!=="TransitionRedirected"&&C("abort",{transition:n,error:t})},error:function(n,t){C("abort",{transition:n,error:t}),C("error",{transition:n,error:t})}};function ue(){const n=document.body;n.innerHTML=`
  <div id="app" class="min-h-screen font-sans">
    <c-header></c-header>
    <router-outlet></router-outlet>
  </div>
  <footer class="cu-footer w-full bg-cardiff-dark text-white p-4 mt-8">
    <div class="max-w-4xl mx-auto text-center text-sm">
      <p>Not an official Cardiff University website. This is only a test.</p>
      <p>Created by <a class="underline font-semibold" href="https://github.com/jaredsartin/CUOpenDayTest" target="_blank" rel="noopener noreferrer">Jared Sartin.</p>
    </div>
  </footer>
  `}function he(){ue();const n=[{name:"app",path:"/",children:[{name:"home",path:"",component:"s-landing"},{name:"topic",path:"topic/:topicId",component:"s-topic"},{name:"location-hub",path:"locations",children:[{name:"locations",path:"",component:"s-location-list"},{name:"location",path:":locationId",component:"s-location"}]},{name:"error",path:":path*",component:"s-error"}]}],t=new Bt({routes:n,pushState:!1,outlet:"router-outlet"});t.use(ce),t.use(le),t.use(pt),t.listen(),window.addEventListener("router-transition",()=>{window.scrollTo(0,0)})}async function J(n){const s=await(await fetch(`/CUOpenDayTest/api/${n}.json`)).json();window.CUEvents=window.CUEvents||{},window.CUEvents[n]=s}Promise.all([J("OpenDay"),J("Locations")]).then(he);
