(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();const et="/CUOpenDayTest/cu-logo.svg";class dt extends HTMLElement{connectedCallback(){const t=(e,s)=>`
    <nav-item class="cursor-pointer border-transparent [&.active]:border-cardiff-dark border-0 border-b-4 h-16 flex items-center" route="${e}">
      <span class="text-cardiff-dark font-semibold">${s}</span>
    </nav-item>`;this.innerHTML=`
    <nav>
      <div class="w-full flex coll sm:flex-row items-center gap-4 p-4 h-18">
        <a href="https://www.cardiff.ac.uk/" target="_blank" rel="noopener noreferrer">
          <img src="${et}" alt="Cardiff University Logo" class="h-16 w-auto" />
        </a>
        <router-links id="top-nav" class="nav-spacer h-18 flex gap-6 items-center">
          ${t("home","Event Home")}
          ${t("location-hub","Getting Around")}
        </router-links>
      </div>
    </nav>
    `}}customElements.define("c-header",dt);class mt extends HTMLElement{connectedCallback(){const{titletext:t,secondarytext:e,background:s}=Object.fromEntries([...this.attributes].map(o=>[o.name,o.value]));this.innerHTML=`
      <section class="cu-head w-full md:h-64 h-48 text-white bg-cover bg-center bg-black/40 bg-blend-multiply px-4">
        <div class="max-w-4xl mx-auto flex flex-col justify-center h-full py-8">
          <h1 class="text-2xl md:text-5xl font-bold mb-4 font-serif w-full">${t}</h1>
          ${e!=="undefined"?`<h3 class="text-xl md:text-2xl mb-2 w-full">${e}</h3>`:""}
        </div>
      </section>
    `,this.querySelector("section.cu-head").style.backgroundImage=`url('${s||""}')`}}customElements.define("c-page-header",mt);class ft extends HTMLElement{connectedCallback(){this.innerHTML=`
      Error: The page you are looking for does not exist.
    `}}customElements.define("s-error",ft);class pt extends HTMLElement{model;unbindLinks;beforeRouteEnter(){this.model=window.CUEvents.OpenDay}connectedCallback(){this.innerHTML=`
      <c-page-header titletext="${this.model.description}" secondarytext="${this.openDates()}" background="${this.model.cover_image}"></c-page-header>
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h2 class="text-2xl font-semibold mb-4">Topics</h2>
        <router-links id="topics-list">${this.renderTopics(this.model.topics)}</div>
      </section>
    `}renderTopics(t){return t.map(e=>e&&e.name?`
    <div route="topic" param-topic-id="${e.id}" class="bg-cardiff-light flex flex-row items-center justify-items-center rounded-lg shadow p-1 mb-4 min-h-32 cursor-pointer hover:bg-cardiff-grey transition">
      <img src="${e.cover_image||et}" alt="${e.name}" class="h-48 w-32 object-cover rounded" />
      <div class="ml-4 flex flex-col">
        <h2 class="text-xl font-bold text-cardiff-red mb-2">${e.name}</h2>
        <p class="text-cardiff-dark mb-2">${e.description||""}</p>
      </div>
    </div>
    `:"").join("")}openDates(){const t=new Date(this.model.start_time),e=new Date(this.model.end_time);return t.toDateString()===e.toDateString()?`${t.toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})}, from ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} to ${e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:`${t.toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})} to ${e.toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})}`}}customElements.define("s-landing",pt);class gt extends HTMLElement{model;$router;beforeRouteEnter(){this.model=window.CUEvents.Locations}connectedCallback(){this.innerHTML=`
      <c-page-header titletext="Locations" secondarytext="Notable locations on event day" background=""></c-page-header>
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h2 class="text-2xl font-semibold mb-4">University Locations</h2>
        <ul class="list-disc list-inside text-sm mb-8">
          ${this.model.university.map(t=>`
            <li><a href="${this.$router.generate("location",{locationId:t.id})}" class="text-blue-600 visited:text-purple-600">${t.title}</a></li>
          `).join("")}
        </ul>
        <h2 class="text-2xl font-semibold mb-4">Refreshment Locations</h2>
        <ul class="list-disc list-inside text-sm mb-8">
          ${this.model.refreshments.map(t=>`
            <li><a href="${this.$router.generate("location",{locationId:t.id})}" class="text-blue-600 visited:text-purple-600">${t.building_name}</a></li>
          `).join("")}
        </ul>
        <h2 class="text-2xl font-semibold mb-4">Accommodation Locations</h2>
        <ul class="list-disc list-inside text-sm mb-8">
          ${this.model.accommodation.map(t=>`
            <li><a href="${this.$router.generate("location",{locationId:t.id})}" class="text-blue-600 visited:text-purple-600">${t.building_name}</a></li>
          `).join("")}
        </ul>
        <h2 class="text-2xl font-semibold mb-4">Transportation Locations</h2>
        <ul class="list-disc list-inside text-sm mb-8">
          ${this.model.transportation.map(t=>`
            <li><a href="${this.$router.generate("location",{locationId:t.id})}" class="text-blue-600 visited:text-purple-600">${t.building_name}</a></li>
          `).join("")}
        </ul>
      </section>
    `}}customElements.define("s-location-list",gt);class bt extends HTMLElement{universityModel;refreshmentsModel;accomodationModel;transportationModel;beforeRouteEnter(t){this.universityModel=window.CUEvents.Locations.university.find(e=>e.id==t.params.locationId),this.refreshmentsModel=window.CUEvents.Locations.refreshments.find(e=>e.id==t.params.locationId),this.accomodationModel=window.CUEvents.Locations.accommodation.find(e=>e.id==t.params.locationId),this.transportationModel=window.CUEvents.Locations.transportation.find(e=>e.id==t.params.locationId)}connectedCallback(){const t=this.universityModel||this.refreshmentsModel||this.accomodationModel||this.transportationModel;if(!t){this.innerHTML=`
        <c-page-header titletext="Location Not Found" secondarytext="" background=""></c-page-header>
        <section class="cu-content max-w-3xl mx-auto my-8">
          <p>We currently do not have information about this location. Please check back later or contact support for assistance.</p>
        </section>
      `;return}const e=s=>s?s.replace(/\r\n/g,"<br>").trim():"";this.innerHTML=`
      <c-page-header titletext="${t.title}" secondarytext="${t.campus.title}" background="${t.cover_image}"></c-page-header>
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h2 class="text-2xl font-semibold mb-4">Details</h2>
        <p class="mb-4">${this.mapLink(t.address,t.postcode)}</p>
        <ul class="list-disc list-inside text-sm">
          <li><span class="font-semibold">Accessible:</span> ${t.accessible==1?"Yes":"No"}</li>
          <li><span class="font-semibold">Bike Parking:</span> ${t.bike_parking==1?"Yes":"No"}</li>
          <li><span class="font-semibold">Parking:</span> ${t.parking==1?"Yes":"No"}</li>
          ${t.website?`<li><a href="${t.website}" class="text-blue-600 visited:text-purple-600" target="_blank" rel="noopener noreferrer">Official Website</a></li>`:""}
        </ul>
      </section>
      ${this.universityModel&&this.universityModel.description?`
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h3 class="text-xl font-semibold mb-4">Location Information</h3>
        <p class="mb-4">${e(this.universityModel.description)}</p>
      </section>`:""}
      ${this.refreshmentsModel&&this.refreshmentsModel.title?`
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h3 class="text-xl font-semibold mb-4">Refreshments Available</h3>
        <p class="mb-4">${e(this.refreshmentsModel.title)}</p>
      </section>`:""}
      ${this.accomodationModel&&this.accomodationModel.title?`
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h3 class="text-xl font-semibold mb-4">Accommodation Information</h3>
        <p class="mb-4">${e(this.accomodationModel.title)}</p>
      </section>`:""}
      ${this.transportationModel&&this.transportationModel.title?`
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h3 class="text-xl font-semibold mb-4">Transportation Information</h3>
        <p class="mb-4">${e(this.transportationModel.title)}</p>
      </section>`:""}
    `}mapLink(t,e){const s=e?e.trim():"",o=t?t.trim():"",i=o?o+", "+s:s,r=encodeURIComponent(i),a=navigator.userAgent;let c;return/iPhone|iPad|iPod/.test(a)?c=`http://maps.apple.com/?q=${r}`:/Android/.test(a)?c=`geo:0,0?q=${r}`:c=`https://www.google.com/maps/search/?api=1&query=${r}`,`${i} (<a href="${c}" class="text-blue-600 visited:text-purple-600" target="_blank" rel="noopener noreferrer">View on map</a>)`}}customElements.define("s-location",bt);class yt extends HTMLElement{model;eventModel;$router;beforeRouteEnter(t){this.eventModel=window.CUEvents.OpenDay,this.model=window.CUEvents.OpenDay.topics.find(e=>e.id==t.params.topicId),this.model||t.redirectTo("error")}connectedCallback(){this.innerHTML=`
      <c-page-header titletext="${this.model.name}" secondarytext="${this.eventModel.description}" background="${this.model.cover_image}"></c-page-header>
      <section class="cu-content max-w-3xl mx-auto my-8">
        ${this.model.description?`<p class="mb-4">${this.model.description}</p>`:""}
      </section>
      <section class="cu-content max-w-3xl mx-auto my-8">
        <h2 class="text-2xl font-semibold mb-4">Programs</h2>
        <ul class="list-disc list-inside text-sm">
          ${this.model.programs.map(t=>t&&t.title?`
            <details class="group border p-4 rounded-lg mb-4 hover:bg-cardiff-light transition">
              <summary class="cursor-pointer flex flex-col">
                ${t.programType.type?`<p class="italic">${t.programType.type}</p>`:""}
                <h4 class="text-lg">${t.title}</h4>
                ${t.start_time?`<p><span class="font-semibold">Time:</span> ${this.parseTime(t.start_time)}${t.end_time?" - "+this.parseTime(t.end_time,!1):""}</p>`:""}
              </summary>

              <div class="mt-3 opacity-0 group-open:opacity-100 transition-all duration-300">
                <hr/>
                ${t.school?`<p class="italic mt-2 mb-2">${t.school.name}</p>`:""}
                ${t.description?`<p class="mt-2 mb-2">${t.description}</p>`:""}
                <p><span class="font-semibold">Building:</span> ${t.location.title} (<a href="${this.$router.generate("location",{locationId:t.location.id})}" class="text-blue-600 visited:text-purple-600">Location details</a>)</p>
                ${t.floor?`<p><span class="font-semibold">Floor:</span> ${t.floor}</p>`:""}
                ${t.room?`<p><span class="font-semibold">Room:</span> ${t.room}</p>`:""}
              </div>
            </details>
          `:"").join("")}
        </ul>
      </section>
    `}parseTime(t,e=!0){const s=new Date(t);return e?s.toLocaleString(void 0,{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}customElements.define("s-topic",yt);const nt=Symbol("routerLinksData"),D=new Set;let R;const vt=function(n,t,e,s,o){const i=function(r){let a=r.target;for(;a&&a!==n;a=a.parentNode)a.matches&&a.matches(e)&&(r.selectorTarget=a,s.call(o,r))};return i.eventName=t,n.addEventListener(t,i,!1),i};function xt(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}const wt=function(n,t){const e=t.eventName;n.removeEventListener(e,t,!1)},$t=n=>{if(n.indexOf("-")===-1)return n;const t=n.split("-");let e="";for(let s=0;s<t.length;s++){const o=t[s];e+=s?o.charAt(0).toUpperCase()+o.slice(1):o}return e};function Lt(n,t){n.forEach(function(e){if(e.type==="attributes"){const s=e.attributeName;(s.indexOf("param-")===0||s.indexOf("query-")===0)&&I(e.target,t.rootEl)}else e.addedNodes.forEach(s=>{s.nodeType===1&&(s.getAttribute("route")&&I(s,t.rootEl),ot(t.rootEl))})})}const Et={childList:!0,subtree:!0,attributes:!0};function B(n,t,e){const s=n.attributes;for(let o=0;o<s.length;o++){const i=s[o];if(i.name.indexOf(t)===0){const r=$t(i.name.slice(t.length));e[r]=i.value}}return e}function Tt(n,t,e,s,o){let i=o[e];return typeof i=="function"&&(i=i.call(n,t,s)),i||{}}function k(n,t,e,s,o){const i=n[nt].options,r=Tt(n,t,s,e,i);return B(n,o,r),B(e,o,r)}function st(n,t,e,s){const o=n.hasAttribute("active-class")?n.getAttribute("active-class"):"active";if(o){const i=R.isActive(t,e,s,n.hasAttribute("exact"));n.classList.toggle(o,i)}}function I(n,t){const e=n.getAttribute("route");if(!e)return;const s=k(t,e,n,"params","param-"),o=k(t,e,n,"query","query-");try{const i=R.generate(e,s,o),r=n.tagName==="A"?n:n.querySelector("a");r&&r.setAttribute("href",i),R.state.activeTransition||st(n,e,s,o)}catch(i){console.warn(`Error generating link for "${e}": ${i}`)}}function ot(n){n.querySelectorAll("[route]").forEach(e=>{I(e,n)})}function kt(n){if(n.button!==0||xt(n))return;n.preventDefault();const t=n.selectorTarget,e=t.getAttribute("route");if(!e)return;const s=k(this,e,t,"params","param-"),o=k(this,e,t,"query","query-"),i=t.hasAttribute("replace")?"replaceWith":"transitionTo";R[i](e,s,o)}function Ct(n,t={}){const e=new MutationObserver(Lt);e.rootEl=n,n[nt]={options:t,observer:e};const s=vt(n,"click","[route]",kt,n);return ot(n),e.observe(n,Et),D.add(n),function(){D.delete(n),wt(n,s)}}function Rt(n){R=n}function Mt(){D.forEach(n=>{n.querySelectorAll("[route]").forEach(t=>{const e=t.getAttribute("route");if(!e)return;const s=k(n,e,t,"params","param-"),o=k(n,e,t,"query","query-");st(t,e,s,o)})})}const Ut={create:Rt,done:Mt};class St extends HTMLElement{unbindRouterLinks;params={};query={};connectedCallback(){this.unbindRouterLinks=Ct(this,{params:this.params,query:this.query})}disconnectedCallback(){typeof this.unbindRouterLinks=="function"&&(this.unbindRouterLinks(),this.unbindRouterLinks=void 0)}}customElements.get("router-links")||customElements.define("router-links",St);const Pt=(n,t,e)=>(n[t]=e,n),Ot=Array.isArray,P=Object.keys,x=n=>n&&(Ot(n)?n.slice(0):w({},n)),W=(n,t)=>t.reduce((e,s)=>n[s]===void 0?e:Pt(e,s,n[s]),{}),V=(n,t)=>{const e=P(n);return e.length===P(t).length&&e.every(s=>t[s]===n[s])},w=Object.assign;function _(n,t,...e){if(!n){let s=0;throw new Error("Invariant Violation: "+t.replace(/%s/g,()=>e[s++]))}}function At(n){let t=[];const e={},s={};n(function(c,l,u){let d;if(_(!s[c],'Route names must be unique, but route "%s" is declared multiple times',c),s[c]=!0,arguments.length===1&&(l={}),arguments.length===2&&typeof l=="function"&&(u=l,l={}),typeof l.path!="string"){const m=c.split(".");l.path=m[m.length-1]}u&&(t=t.concat(c),u(),d=o(),t.splice(-1)),i({name:c,path:l.path,routes:d||[],options:l})});function o(){return e[r()]||[]}function i(a){const c=r();e[c]=e[c]||[],e[c].push(a)}function r(){return t.join(".")}return o()}function it(n){const t=[];return n.forEach(({name:e,children:s,...o})=>{if(typeof o.path!="string"){const i=e.split(".");o.path=i[i.length-1]}t.push({name:e,path:o.path,options:o,routes:s?it(s):[]})}),t}const _t=/:([a-zA-Z_$][a-zA-Z0-9_$?]*[?+*]?)/g,qt=/[+*?]$/g,rt=/\?(.+)/,q={};function at(n,t){return n in q||(q[n]=t(n)),q[n]}function Dt(n,t){return at(n,t).paramNames}function It(n,t,e){const s=at(n,e),o=s.matcher,i=s.paramNames,r=t.match(o);if(!r)return null;const a={};return i.forEach(function(c,l){a[c]=r[l+1]&&decodeURIComponent(r[l+1])}),a}function Ht(n,t){return t=t||{},n.replace(_t,function(e,s){const o=s.replace(qt,""),i=s.slice(-1);if(i==="?"||i==="*"){if(t[o]==null)return""}else _(t[o]!=null,"Missing '%s' parameter for path '%s'",o,n);let r=encodeURIComponent(t[o]);return(i==="*"||i==="+")&&(r=r.replace("%2F","/")),r})}function Nt(n,t){const e=t.match(rt);return e&&n.parse(e[1])}function jt(n,t,e){const s=n.stringify(e,{indices:!1});return s?ct(t)+"?"+s:t}function ct(n){return n.replace(rt,"")}function Ft(n,t,e){return n.addEventListener(t,e),e}function Bt(n,t,e){return n.removeEventListener(t,e),e}class Wt{constructor(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),this.location=window.location,this.history=window.history}atRoot(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root}getHash(){const t=this.location.href.match(/#(.*)$/);return t?t[1]:""}getFragment(t,e){if(t==null)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);const s=this.root.replace(Kt,"");t.indexOf(s)||(t=t.slice(s.length))}else t=this.getHash();return t.replace(K,"")}start(t={}){this.started=!0,this.options=w({root:"/"},t),this.location=this.options.location||this.location,this.history=this.options.history||this.history,this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=this._wantsPushState;const e=this.getFragment();this.root=`/${this.root}/`.replace(Vt,"/"),Ft(window,this._hasPushState?"popstate":"hashchange",this.checkUrl),this.fragment=e;const s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(`${this.root}#${this.fragment}`),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(K,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()}stop(){Bt(window,this._hasPushState?"popstate":"hashchange",this.checkUrl),this.started=!1}route(t,e){this.handlers.unshift({route:t,callback:e})}checkUrl(){if(this.getFragment()===this.fragment)return!1;this.loadUrl()}loadUrl(t){return t=this.fragment=this.getFragment(t),this.handlers.some(e=>{if(e.route.test(t))return e.callback(t),!0})}update(t,e){if(!this.started)return!1;(!e||e===!0)&&(e={trigger:!!e});let s=this.root+(t=this.getFragment(t||""));if(t=t.replace(Qt,""),this.fragment!==t){if(this.fragment=t,t===""&&s!=="/"&&(s=s.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,s);else if(this._wantsHashChange)this._updateHash(this.location,t,e.replace);else return this.location.assign(s);if(e.trigger)return this.loadUrl(t)}}_updateHash(t,e,s){if(s){const o=t.href.replace(/(javascript:|#).*$/,"");t.replace(`${o}#${e}`)}else t.hash=`#${e}`}onChange(t){this.route(/^(.*?)$/,t)}hasPushState(){if(!this.started)throw new Error("only available after LocationBar.start()");return this._hasPushState}}const K=/^[#\/]|\s+$/g,Vt=/^\/+|\/+$/g,Kt=/\/$/,Qt=/#.*$/;class zt{constructor(t={}){this.path=t.path||"",this.options=w({pushState:!1,root:"/"},t),this.locationBar=new Wt,this.locationBar.onChange(e=>{this.handleURL(`/${e||""}`)}),this.locationBar.start(t)}getURL(){return this.path}setURL(t,e={}){this.path!==t&&(this.path=t,this.locationBar.update(t,w({trigger:!0},e)))}replaceURL(t,e={}){this.path!==t&&(this.path=t,this.locationBar.update(t,w({trigger:!0,replace:!0},e)))}onChange(t){this.changeCallback=t}formatURL(t){if(this.locationBar.hasPushState()){let e=this.options.root;return t!==""&&(e=e.replace(/\/$/,"")),e+t}else return t[0]==="/"&&(t=t.substr(1)),`#${t}`}removeRoot(t){return this.options.pushState&&this.options.root&&this.options.root!=="/"?t.replace(this.options.root,""):t}destroy(){this.locationBar.stop()}handleURL(t){this.path=t,this.changeCallback&&this.changeCallback(t)}}class Yt{constructor({path:t}){this.path=t||""}getURL(){return this.path}setURL(t,e){this.path!==t&&(this.path=t,this.handleURL(this.getURL(),e))}replaceURL(t,e){this.path!==t&&this.setURL(t,e)}onChange(t){this.changeCallback=t}handleURL(t,e={}){this.path=t,e=w({trigger:!0},e),this.changeCallback&&e.trigger&&this.changeCallback(t)}removeRoot(t){return t}formatURL(t){return t}}const O="TransitionRedirected",T="TransitionCancelled";function Q(n,t,e){n.middleware.forEach(s=>{s.error&&s.error(t,e)})}function z(n){n=n||{};const t=n.router,e=t.log,s=t.logError,o=n.path,i=n.match,r=i.routes,a=i.params,c=i.pathname,l=i.query,u=n.id,d=Date.now();e("---"),e("Transition #"+u,"to",o),e("Transition #"+u,"routes:",r.map(h=>h.name)),e("Transition #"+u,"params:",a),e("Transition #"+u,"query:",l);let m,p;const g=new Promise(function(h,y){m=h,p=y});g.then(function(){e("Transition #"+u,"completed in",Date.now()-d+"ms")}).catch(function(h){h.type!==O&&h.type!==T&&(e("Transition #"+u,"FAILED"),s(h))});let j=!1;const f={id:u,prev:{routes:x(t.state.routes)||[],path:t.state.path||"",pathname:t.state.pathname||"",params:x(t.state.params)||{},query:x(t.state.query)||{}},routes:x(r),path:o,pathname:c,params:x(a),query:x(l),redirectTo:function(...h){return t.transitionTo(...h)},retry:function(){return t.transitionTo(o)},cancel:function(h){t.state.activeTransition===f&&(f.isCancelled||(t.state.activeTransition=null,f.isCancelled=!0,j=!0,h||(h=new Error(T),h.type=T),h.type===T&&e("Transition #"+u,"cancelled"),h.type===O&&e("Transition #"+u,"redirected"),t.middleware.forEach(y=>{y.cancel&&y.cancel(f,h)}),p(h)))},followRedirects:function(){return g.catch(function(h){return t.state.activeTransition?t.state.activeTransition.followRedirects():Promise.reject(h)})},then:g.then.bind(g),catch:g.catch.bind(g)};t.middleware.forEach(h=>{h.before&&h.before(f)});function F(h,y){let U,S;if(!j)if(h<t.middleware.length){U=t.middleware[h],S=U.name||"anonymous",e("Transition #"+u,"resolving middleware:",S);let $;try{$=U.resolve?U.resolve(f,y):y,_(f!==$,"Middleware %s returned a transition which resulted in a deadlock",S)}catch(v){return t.state.activeTransition=null,Q(t,f,v),p(v)}Promise.resolve($).then(function(v){F(h+1,v)}).catch(function(v){e("Transition #"+u,"resolving middleware:",S,"FAILED"),t.state.activeTransition=null,Q(t,f,v),p(v)})}else t.state={activeTransition:null,routes:r,path:o,pathname:c,params:a,query:l},t.middleware.forEach($=>{$.done&&$.done(f)}),m()}return n.noop?m():Promise.resolve().then(()=>F(0)),n.noop&&(f.noop=!0),f}function Y(n,t,e){e!==!0&&(n[t]=typeof e=="function"?e:()=>{})}const Zt={parse(n){return n.split("&").reduce((t,e)=>{const s=e.split("=");return t[s[0]]=decodeURIComponent(s[1]),t},{})},stringify(n){return Object.keys(n).reduce((t,e)=>(n[e]!==void 0&&t.push(e+"="+encodeURIComponent(n[e])),t),[]).join("&")}};function Gt(n,t){if(n instanceof RegExp)return{keys:!1,pattern:n};var e,s,o,i,r=[],a="",c=n.split("/");for(c[0]||c.shift();o=c.shift();)e=o[0],e==="*"?(r.push(e),a+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):e===":"?(s=o.indexOf("?",1),i=o.indexOf(".",1),r.push(o.substring(1,~s?s:~i?i:o.length)),a+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~s?"?":"")+"\\"+o.substring(i))):a+="/"+o;return{keys:r,pattern:new RegExp("^"+a+"/?$","i")}}const Z=/:(\w+)\*/;function Jt(n){const t=Z.exec(n),e=t?n.replace(Z,"*"):n,{pattern:s,keys:o}=Gt(e),i=t?o.map(r=>r==="*"?t[1]:r):o;return{matcher:s,paramNames:i}}class Xt{constructor(t={}){this.nextId=1,this.state={},this.middleware=[],this.options=w({location:"browser",logError:!0,qs:Zt,patternCompiler:Jt},t),Y(this,"log",this.options.log),Y(this,"logError",this.options.logError),t.routes&&this.map(t.routes)}use(t,e={}){const s=typeof t=="function"?{resolve:t}:t;return typeof e.at=="number"?this.middleware.splice(e.at,0,s):this.middleware.push(s),s.create&&s.create(this),this}map(t){this.routes=Array.isArray(t)?it(t):At(t);const e=this.matchers=[],s={},o={};i({routes:this.routes},[],r=>{let a=r.reduce((l,u)=>(u.path[0]==="/"?u.path:`${l}/${u.path}`).replace(/\/$/,""),"");a===""&&(a="/");const c=r[r.length-1];if(c.options.abstract){o[a]=c.name;return}if(c.path===""){let l;e.some(u=>{if(u.path===a)return l=u,!0}),l?l.routes=r:o[a]&&e.push({routes:r,name:o[a],path:a})}if(e.push({routes:r,name:c.name,path:a}),s[a]&&c.path!=="")throw new Error(`Routes ${s[a]} and ${c.name} have the same url path '${a}'`);s[a]=c.name});function i(r,a,c){r.routes.forEach(l=>{c(a.concat(l)),l.routes.length&&i(l,a.concat(l),c)})}return this}listen(t){const e=this.location=this.createLocation(t||"");return e.onChange(s=>{const o=this.state.path;this.dispatch(s).catch(i=>(i&&i.type===T&&this.location.replaceURL(o,{trigger:!1}),i))}),this.dispatch(e.getURL())}transitionTo(t,e,s){return this.state.activeTransition?this.replaceWith(t,e,s):this.doTransition("setURL",t,e,s)}replaceWith(t,e,s){return this.doTransition("replaceURL",t,e,s)}generate(t,e,s){_(this.location,"call .listen() before using .generate()");let o;if(s=s||{},this.matchers.forEach(r=>{r.name===t&&(o=r)}),!o)throw new Error(`No route is named ${t}`);const i=jt(this.options.qs,Ht(o.path,e),s);return this.location.formatURL(i)}destroy(){this.location&&this.location.destroy&&this.location.destroy(),this.state.activeTransition&&this.state.activeTransition.cancel(),this.state={},this.middleware.forEach(t=>{t.destroy&&t.destroy(this)})}isActive(t,e,s,o){const i=this.state.routes||[],r=this.state.params,a=this.state.query;let c=i.some(l=>l.name===t)&&(!o||i[i.length-1].name===t);return c=c&&(!e||P(e).every(l=>r[l]===e[l])),c=c&&(!s||P(s).every(l=>a[l]===s[l])),c}doTransition(t,e,s,o){const i=this.location.getURL();let r=e;r[0]!=="/"&&(r=this.generate(e,s,o),r=r.replace(/^#/,"/")),this.options.pushState&&(r=this.location.removeRoot(r));const a=this.dispatch(r);return a.catch(c=>(c&&c.type===T&&this.location.replaceURL(i,{trigger:!1}),c)),this.location[t](r,{trigger:!1}),a}match(t){t=(t||"").replace(/\/$/,"")||"/";let e,s=[];const o=ct(t),{qs:i,patternCompiler:r}=this.options;return this.matchers.some(c=>{if(e=It(c.path,o,r),e)return s=c.routes,!0}),{routes:s.map(a),params:e||{},pathname:o,query:Nt(i,t)||{}};function a(c){return{name:c.name,path:c.path,params:W(e,Dt(c.path,r)),options:x(c.options)}}}dispatch(t){const e=this.match(t),s=e.query,o=e.pathname,i=this.state.activeTransition;if(i&&i.pathname===o&&V(i.query,s))return i;if(i){const a=new Error(O);a.type=O,a.nextPath=t,i.cancel(a)}if(!i&&this.state.pathname===o&&V(this.state.query,s))return z({id:this.nextId++,path:t,match:e,noop:!0,router:this});const r=z({id:this.nextId++,path:t,match:e,router:this});return this.state.activeTransition=r,r}createLocation(t){const e=this.options.location;if(typeof e!="string")return e;if(e==="browser")return new zt(W(this.options,["pushState","root"]));if(e==="memory")return new Yt({path:t});throw new Error("Location can be `browser`, `memory` or a custom implementation")}log(...t){console.info(...t)}logError(...t){console.error(...t)}}const te=Promise.resolve();let b=Object.create(null),H=Object.create(null),M=Object.create(null),N,L,E;function ee(n){const t=parseFloat(n);return n==t?t:n}function ne(n,t){let e=n;return e!==void 0&&(t==="number"?e=ee(n):typeof t=="function"&&(e=t(n))),e}function se(n){return{init(t){t(n)}}}function oe(n){N=n,L=n.options.outlet}function ie(){N=null,b=Object.create(null),H=Object.create(null),M=Object.create(null),E=null}function re(n,t){const e=Object.keys(n);return e.length===Object.keys(t).length&&e.every(s=>t[s]===n[s])}function ae(n){return(n.shadowRoot||n).querySelector(n.constructor.outlet||"router-outlet")}function ce(){if(E)return E;if(!L)return document.body;if(E=typeof L=="string"?document.querySelector(L):L,!E)throw new Error(`slick-router(wc): Invalid outlet option ${L}`);return E}function le(n,t){let e=n.routes[t];for(;e;){if(e.options.component)return b[e.name];e=n.routes[--t]}}function ue(n,t){let e,s,o;const i=Math.max(n.length,t.length);for(e=0;e<i&&(s=n[e],o=t[e],!(!(s&&o)||s.name!==o.name||!re(s.params,o.params)));e++);return e}function lt(n,t,e){for(let s=0;s<t.length;s++){const{route:o}=t[s],i=M[o.name];for(const{hooks:r,set:a}of Object.values(i))r.forEach(c=>{typeof c[e]=="function"&&c[e](n,a)})}}async function A(n,t,e,s){for(let o=0;o<t.length;o++){let i;const{route:r,el:a}=t[o],c=r.options[`${e}${s}`];if(typeof c=="function"&&(i=await c(n),i===!1&&n.cancel()),n.isCancelled)break;const l=a&&a[`${e}Route${s}`];if(typeof l=="function"&&(i=await l.call(a,n),i===!1&&n.cancel()),n.isCancelled)break}}function he(n){return n&&n.__esModule?n.default:n}function G(n){return n&&typeof n=="object"?n:se(n)}function de(n){let t=M[n.name];if(!t){t=M[n.name]=Object.create(null);const e=n.options.properties;if(e)for(const[s,o]of Object.entries(e)){const i=Array.isArray(o)?o.map(G):[G(o)],r=(a,c)=>{const l=t[s],u=ne(a,c);if(l.value===u)return;l.value=u;const d=b[n.name];d&&(d[s]=u),i.forEach(m=>{typeof m.update=="function"&&m.update(u,d)})};t[s]={hooks:i,set:r},i.forEach(a=>{typeof a.init=="function"&&a.init(r)})}}}async function me(n){const t=[];for(const e of n){let s=e.options.reuse?b[e.name]:void 0,o=e.options.component;!s&&o&&(typeof o=="function"&&!(o.prototype instanceof HTMLElement)&&(o=H[e.name]||(H[e.name]=he(await o(e)))),s=typeof o=="string"?document.createElement(o):new o,b[e.name]=s,s.$router=N),de(e),t.push({el:s,route:e})}return t}function J(n,t){const e=M[t.name];Object.entries(e).forEach(([s,{value:o}])=>{n[s]=o})}const ut=new WeakSet,X=new WeakMap;async function fe(n,t,e){const{path:s,pathname:o,routes:i,params:r,query:a}=n,c={path:s,pathname:o,routes:i,params:r,query:a};for(let l=0;l<e;l++){const u=n.routes[l],d=b[u.name];d&&(d.$route=c,J(d,u))}for(let l=0;l<t.length;l++){const{el:u,route:d}=t[l];if(u){const m=le(n,e+l-1),p=m?ae(m):ce();if(p){const g=X.get(p)||p.firstElementChild;g&&(p.removeChild(g),ut.add(g)),u.$route=c,J(u,d),p.appendChild(u),X.set(p,u),await(u.updateComplete||te)}}}}function pe(n,t){let e;for(let s=t.length-1;s>=0;s--){const{route:o,el:i}=t[s];n.some(({route:r})=>r.name===o.name)||(i&&(!e&&!ut.has(i)&&i.remove(),e=!0),b[o.name]=void 0)}}async function ge(n){const t=n.prev.routes,e=ue(t,n.routes),s=[];for(let i=t.length-1;i>=e;i--){const r=t[i];s.push({el:b[r.name],route:r})}if(await A(n,s,"before","Leave"),n.isCancelled)return;const o=await me(n.routes.slice(e));await A(n,o,"before","Enter"),!n.isCancelled&&(lt(n,o,"enter"),await fe(n,o,e),pe(o,s),n.activated=o,n.deactivated=s)}function be(n){lt(n,n.deactivated,"leave"),A(n,n.deactivated,"after","Leave"),A(n,n.activated,"after","Enter")}const ye={create:oe,destroy:ie,resolve:ge,done:be};let ht;function C(n,t){window.dispatchEvent(new CustomEvent(`${ht}${n}`,{detail:t}))}const ve={create:function(n){ht=n.options.eventPrefix||"router-"},before:function(n){C("before:transition",{transition:n})},done:function(n){C("transition",{transition:n})},cancel:function(n,t){t.type!=="TransitionRedirected"&&C("abort",{transition:n,error:t})},error:function(n,t){C("abort",{transition:n,error:t}),C("error",{transition:n,error:t})}};function xe(){const n=document.body;n.innerHTML=`
  <div id="app" class="min-h-screen font-sans">
    <c-header></c-header>
    <router-outlet></router-outlet>
  </div>
  <footer class="cu-footer w-full bg-cardiff-dark text-white p-4 mt-8">
    <div class="max-w-4xl mx-auto text-center text-sm">
      <p>Not an official Cardiff University website. This is only a test.</p>
      <p>Created by <a class="underline font-semibold" href="https://github.com/jaredsartin/CUOpenDayTest" target="_blank" rel="noopener noreferrer">Jared Sartin.</p>
    </div>
  </footer>
  `}function we(){xe();const n=[{name:"app",path:"/",children:[{name:"home",path:"",component:"s-landing"},{name:"topic",path:"topic/:topicId",component:"s-topic"},{name:"location-hub",path:"locations",children:[{name:"locations",path:"",component:"s-location-list"},{name:"location",path:":locationId",component:"s-location"}]},{name:"error",path:":path*",component:"s-error"}]}],t=new Xt({routes:n,pushState:!1,outlet:"router-outlet"});t.use(ye),t.use(ve),t.use(Ut),t.listen(),window.addEventListener("router-transition",()=>{window.scrollTo(0,0)})}async function tt(n){const s=await(await fetch(`/CUOpenDayTest/api/${n}.json`)).json();window.CUEvents=window.CUEvents||{},window.CUEvents[n]=s}Promise.all([tt("OpenDay"),tt("Locations")]).then(we);
